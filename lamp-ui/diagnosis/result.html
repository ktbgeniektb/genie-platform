<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>診断結果</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link rel="stylesheet" href="./../css/diagnosis_result.css" />
  </head>
  <body>
    <section class="result-header">
      <div class="header-image-container">
        <img id="top-image" src="" alt="診断結果画像" />
        <div class="result-overlay-text">
          <div class="main-type-wrapper">
            <h1 id="main-type"></h1>
          </div>
          <div class="description-wrapper">
            <p id="description"></p>
          </div>
        </div>
      </div>
    </section>

    <section class="chart">
      <canvas id="result-chart"></canvas>
    </section>

    <section class="result-section">
      <h2>🔎 特徴</h2>
      <ul id="features"></ul>
    </section>

    <section class="result-section">
      <h2>🌱 ワクワクしやすい瞬間</h2>
      <ul id="moments"></ul>
    </section>

    <section class="result-section">
      <h2>🎯 活かすヒント</h2>
      <ul id="tips"></ul>
    </section>

    <section class="result-section">
      <h2>🔁 あなたの中に、こんな側面も…</h2>
      <p id="sub"></p>
    </section>

    <!-- <a class="ai" href="http://localhost:8000/interview" target="_blank">
      AI面談で深掘りする
    </a> -->
  </body>
  <script type="module">
    import { templates } from "../js/template.js";
    import { firebaseConfig } from "../js/firebaseConfig.js";
    import {
      renderFromFirestore,
      renderFromLocalStorage,
    } from "../js/render.js";

    const id = new URLSearchParams(window.location.search).get("id");

    if (id) {
      renderFromFirestore(id, firebaseConfig, templates);
    } else {
      renderFromLocalStorage(templates);
    }
  </script>
</html>
